{"version":3,"sources":["script.js"],"names":["document","addEventListener","checkValue","addClassErrorHandler","hideError","strError","emailValidate","email","fname","errorsBlock","phone","message","btn","fnameValidate","isSendedForm","regExpEmail","regForm","querySelector","elem","value","trim","e","inputWrap","removeClassError","classList","contains","parentElement","remove","removeEventListener","currentTarget","addClassError","inputBlock","inputField","showError","createElement","appendChild","add","innerHTML","blured","phoneValidate","indexOf","test","checkedValue","slice","length","preventDefault","validForm","messValidate","jQuery","ajax","getAttribute","dataType","data","serialize","type","success","complete","setTimeout","reset","validMsg","errorMap","iti","window","intlTelInput","utilsScript","input","errorMsg","errorCode","getValidationError"],"mappings":"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","file":"script.min.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\r\n  var regForm = document.querySelector(\".form\");\r\n  if (regForm) {\r\n    function checkValue(elem) {\r\n      return elem.value.trim() !== \"\";\r\n    }\r\n\r\n    function removeClassError(elem) {\r\n      var inputWrap = elem;\r\n\r\n      while (!inputWrap.classList.contains(\"input-block\")) {\r\n        inputWrap = inputWrap.parentElement;\r\n      }\r\n\r\n      if (inputWrap.classList.contains(\"error\")) {\r\n        inputWrap.classList.remove(\"error\");\r\n        elem.removeEventListener(\"input\", addClassErrorHandler);\r\n      }\r\n    }\r\n\r\n    function addClassErrorHandler(e) {\r\n      removeClassError(e.currentTarget);\r\n      hideError(e.currentTarget);\r\n    }\r\n\r\n    function addClassError(elem) {\r\n      var inputWrap = elem;\r\n\r\n      while (!inputWrap.classList.contains(\"input-block\")) {\r\n        inputWrap = inputWrap.parentElement;\r\n      }\r\n\r\n      inputWrap.classList.add(\"error\");\r\n      elem.addEventListener(\"input\", addClassErrorHandler);\r\n    }\r\n\r\n    function showError(inputField, message) {\r\n      var inputBlock = inputField;\r\n\r\n      while (!inputBlock.classList.contains(\"input-block\")) {\r\n        inputBlock = inputBlock.parentElement;\r\n      }\r\n\r\n      var errorsBlock = inputBlock.querySelector(\".errors-block\");\r\n      if (!errorsBlock) {\r\n        errorsBlock = document.createElement(\"div\");\r\n        errorsBlock.classList.add(\"errors-block\");\r\n        inputBlock.appendChild(errorsBlock);\r\n      }\r\n\r\n      errorsBlock.innerHTML = message;\r\n    }\r\n\r\n    function hideError(inputField) {\r\n      let inputBlock = inputField;\r\n\r\n      while (!inputBlock.classList.contains(\"input-block\")) {\r\n        inputBlock = inputBlock.parentElement;\r\n      }\r\n\r\n      let errorsBlock = inputBlock.querySelector(\".errors-block\");\r\n      if (errorsBlock && errorsBlock.innerHTML !== \"\") {\r\n        errorsBlock.innerHTML = \"\";\r\n      }\r\n    }\r\n\r\n    var fname = regForm.querySelector('input[name=\"fname\"]');\r\n    var email = regForm.querySelector('input[name=\"email\"]');\r\n    var phone = regForm.querySelector('input[name=\"phone\"]');\r\n    var message = regForm.querySelector('textarea[name=\"message\"]');\r\n    var btn = regForm.querySelector(\".form-btn\");\r\n    var success = document.querySelector(\".success\");\r\n    var isSendedForm = false;\r\n\r\n    const regExpEmail = /^[-.+_a-z0-9]+@(?:[a-z0-9][-a-z0-9]+\\.)+[a-z]{2,6}$/i;\r\n\r\n    function fnameValidate(blured) {\r\n      if (blured && !checkValue(fname)) {\r\n        return;\r\n      }\r\n\r\n      var strError = \"\";\r\n      if (!checkValue(fname)) {\r\n        strError = \"Field is not valid\";\r\n      }\r\n\r\n      if (strError !== \"\") {\r\n        addClassError(fname);\r\n        showError(fname, strError);\r\n      }\r\n\r\n      return strError !== \"\";\r\n    }\r\n\r\n    if (fname) {\r\n      fname.addEventListener(\"input\", function () {\r\n        var value = fname.value;\r\n\r\n        var checkedValue = value.slice(0, 40);\r\n        fname.value = checkedValue;\r\n        if (checkValue(fname) && checkedValue.trim().length >= 1) {\r\n          fname.classList.add(\"valid\");\r\n        } else if (fname.classList.contains(\"valid\")) {\r\n          fname.classList.remove(\"valid\");\r\n        }\r\n      });\r\n\r\n      fname.addEventListener(\"blur\", function () {\r\n        fnameValidate(true);\r\n      });\r\n    }\r\n\r\n    function emailValidate(blured) {\r\n      if (blured && !checkValue(email)) {\r\n        return;\r\n      }\r\n\r\n      var strError = \"\";\r\n      if (!checkValue(email)) {\r\n        strError = \"Field is not valid\";\r\n      } else if (email.value.indexOf(\"+\") >= 0) {\r\n        strError = \"Format is not valid\";\r\n      } else if (!regExpEmail.test(email.value)) {\r\n        strError = \"Format is not valid\";\r\n      }\r\n\r\n      if (strError !== \"\") {\r\n        addClassError(email);\r\n        showError(email, strError);\r\n      }\r\n\r\n      return strError !== \"\";\r\n    }\r\n\r\n    if (email) {\r\n      email.addEventListener(\"input\", function () {\r\n        if (checkValue(email) && email.value.indexOf(\"+\") < 0 && regExpEmail.test(email.value)) {\r\n          email.classList.add(\"valid\");\r\n        } else if (email.classList.contains(\"valid\")) {\r\n          email.classList.remove(\"valid\");\r\n        }\r\n      });\r\n\r\n      email.addEventListener(\"blur\", function () {\r\n        emailValidate(true);\r\n      });\r\n    }\r\n\r\n    function phoneValidate(blured) {\r\n      if (blured && !checkValue(phone)) {\r\n        return;\r\n      }\r\n\r\n      var strError = \"\";\r\n      if (!checkValue(phone)) {\r\n        strError = \"Field is not valid\";\r\n      }\r\n\r\n      if (strError !== \"\") {\r\n        addClassError(phone);\r\n        showError(phone, strError);\r\n      }\r\n\r\n      return strError !== \"\";\r\n    }\r\n\r\n    if (phone) {\r\n      phone.addEventListener(\"input\", function () {\r\n        var value = phone.value;\r\n\r\n        var checkedValue = value.slice(0, 40);\r\n        phone.value = checkedValue;\r\n        if (checkValue(phone) && checkedValue.trim().length >= 1) {\r\n          phone.classList.add(\"valid\");\r\n        } else if (phone.classList.contains(\"valid\")) {\r\n          phone.classList.remove(\"valid\");\r\n        }\r\n      });\r\n\r\n      phone.addEventListener(\"blur\", function () {\r\n        phoneValidate(true);\r\n      });\r\n    }\r\n\r\n    function messValidate(blured) {\r\n      if (blured && !checkValue(message)) {\r\n        return;\r\n      }\r\n\r\n      var strError = \"\";\r\n      if (!checkValue(message)) {\r\n        strError = \"Field is not valid\";\r\n      }\r\n\r\n      if (strError !== \"\") {\r\n        addClassError(message);\r\n        showError(message, strError);\r\n      }\r\n\r\n      return strError !== \"\";\r\n    }\r\n\r\n    if (message) {\r\n      message.addEventListener(\"input\", function () {\r\n        var value = message.value;\r\n\r\n        var checkedValue = value.slice(0, 200);\r\n        message.value = checkedValue;\r\n        if (checkValue(message) && checkedValue.trim().length >= 1) {\r\n          message.classList.add(\"valid\");\r\n        } else if (message.classList.contains(\"valid\")) {\r\n          message.classList.remove(\"valid\");\r\n        }\r\n      });\r\n\r\n      message.addEventListener(\"blur\", function () {\r\n        messValidate(true);\r\n      });\r\n    }\r\n\r\n    regForm.addEventListener(\"submit\", function (e) {\r\n      e.preventDefault();\r\n\r\n      if (isSendedForm || btn.classList.contains(\"waiting\")) {\r\n        return;\r\n      }\r\n\r\n      let validForm = true;\r\n\r\n      if (fname && fnameValidate()) {\r\n        validForm = false;\r\n      }\r\n\r\n      if (email && emailValidate()) {\r\n        validForm = false;\r\n      }\r\n\r\n      if (phone && phoneValidate()) {\r\n        validForm = false;\r\n      }\r\n\r\n      if (message && messValidate()) {\r\n        validForm = false;\r\n      }\r\n\r\n      if (validForm) {\r\n        jQuery.ajax({\r\n          type: regForm.getAttribute(\"method\"),\r\n          url: regForm.getAttribute(\"action\"),\r\n          dataType: \"json\",\r\n          data: jQuery(regForm).serialize(),\r\n\r\n          beforeSend: function () {\r\n            isSendedForm = true;\r\n            if (btn) {\r\n              btn.classList.add(\"waiting\");\r\n            }\r\n          },\r\n          complete: function () {\r\n            if (btn) {\r\n              btn.classList.remove(\"waiting\");\r\n            }\r\n          },\r\n          success: function (data) {\r\n            success.classList.add(\"opened\");\r\n            setTimeout(function () {\r\n              success.classList.remove(\"opened\");\r\n            }, 1000);\r\n            regForm.reset();\r\n          },\r\n          error: function error(xhr) {\r\n            success.classList.add(\"opened\");\r\n            setTimeout(function () {\r\n              success.classList.remove(\"opened\");\r\n            }, 1000);\r\n            regForm.reset();\r\n          },\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n      var input = document.querySelector(\"#phone\"),\r\n      errorMsg = document.querySelector(\"#error-msg\"),\r\n      validMsg = document.querySelector(\"#valid-msg\");\r\n\r\n    var errorMap = [\"Invalid number\", \"Invalid country code\", \"Too short\", \"Too long\", \"Invalid number\"];\r\n\r\n    var iti = window.intlTelInput(input, {\r\n      utilsScript: \"./intlTel/js/utils.js\"\r\n    });\r\n\r\n    var reset = function () {\r\n      input.classList.remove(\"error\");\r\n      errorMsg.innerHTML = \"\";\r\n      errorMsg.classList.add(\"hide\");\r\n      validMsg.classList.add(\"hide\");\r\n    };\r\n\r\n    input.addEventListener('blur', function () {\r\n      reset();\r\n      if (input.value.trim()) {\r\n        if (iti.isValidNumber()) {\r\n          validMsg.classList.remove(\"hide\");\r\n        } else {\r\n          input.classList.add(\"error\");\r\n          var errorCode = iti.getValidationError();\r\n          errorMsg.innerHTML = errorMap[errorCode];\r\n          errorMsg.classList.remove(\"hide\");\r\n        }\r\n      }\r\n    });\r\n\r\n    input.addEventListener('change', reset);\r\n    input.addEventListener('keyup', reset);\r\n});\r\n"]}